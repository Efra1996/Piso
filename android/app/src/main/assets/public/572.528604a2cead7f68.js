"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[572],{572:(M,p,u)=>{u.r(p),u.d(p,{ConfiguracionesPageModule:()=>x});var m=u(6814),a=u(95),r=u(1024),g=u(6958),f=u(5861),o=u(6689),h=u(3590);function b(n,l){if(1&n){const i=o.EpF();o.TgZ(0,"ion-list")(1,"ion-item",13)(2,"ion-input",14),o.NdJ("ionInput",function(e){const c=o.CHM(i).index,d=o.oxw();return o.KtG(d.verificarCambios(e,c))}),o.qZA(),o.TgZ(3,"ion-input",15),o.NdJ("ionInput",function(e){const c=o.CHM(i).index,d=o.oxw();return o.KtG(d.verificarCambios(e,c))}),o.qZA(),o.TgZ(4,"ion-button",16),o.NdJ("click",function(){const e=o.CHM(i),s=e.$implicit,c=e.index,d=o.oxw();return o.KtG(d.confirmarCambios(s,c))}),o._UZ(5,"ion-icon",17),o.qZA(),o.TgZ(6,"ion-button",18),o._UZ(7,"ion-icon",19),o.qZA(),o.TgZ(8,"ion-alert",20),o.NdJ("didDismiss",function(e){const c=o.CHM(i).$implicit,d=o.oxw();return o.KtG(d.setResult(e,c))}),o.qZA()()()}if(2&n){const i=l.$implicit,t=l.index,e=o.oxw();o.xp6(2),o.Q6J("value",i.nombre)("id","nombreInput_"+t),o.xp6(1),o.Q6J("value",i.precio)("id","precioInput_"+t),o.xp6(1),o.Q6J("disabled",i.comprado),o.xp6(2),o.Q6J("id","present-alert_"+t),o.xp6(2),o.Q6J("trigger","present-alert_"+t)("header","Quieres borrar el producto: "+i.nombre)("buttons",e.alertButtons)}}function _(n,l){if(1&n){const i=o.EpF();o.TgZ(0,"div",21)(1,"h1"),o._uU(2,"Nuevo Producto"),o.qZA(),o.TgZ(3,"form",22)(4,"ion-list",23)(5,"ion-item"),o._UZ(6,"ion-input",24),o.qZA(),o.TgZ(7,"ion-item"),o._UZ(8,"ion-input",25),o.qZA(),o.TgZ(9,"ion-item",26)(10,"ion-button",27),o.NdJ("click",function(){o.CHM(i);const e=o.oxw();return o.KtG(e.registrarNuevoProducto())}),o._UZ(11,"ion-icon",28),o.qZA()()()()()}if(2&n){const i=o.oxw();o.xp6(3),o.Q6J("formGroup",i.formReg),o.xp6(7),o.Q6J("disabled",!i.formReg.valid)}}const P=[{path:"",component:(()=>{var n;class l{constructor(t,e,s){this.firebase=t,this.toastController=e,this.fb=s,this.productos=[],this.productosModificar=[],this.nuevoProducto=!1,this.formReg=this.fb.group({precio:new a.NI("",a.kI.required),nombre:new a.NI("",a.kI.required)}),this.isAlertOpen=!1,this.alertButtons=[{text:"No",role:"cancel",cssClass:"alert-button-cancel"},{text:"Si",role:"confirm",cssClass:"alert-button-confirm"}],this.allProducts()}ngOnInit(){}setOpen(t){this.isAlertOpen=t}setProducto(t){this.nuevoProducto=t}allProducts(){this.productos=[],this.firebase.recuperarTodosProductos().then(t=>{t.map(e=>{this.productos.push({nombre:e.nombre,precio:e.precio,comprado:!0})}),this.productos=this.productos.sort((e,s)=>e.nombre.localeCompare(s.nombre)),this.productosModificar=[...this.productos]}).catch()}mostrarToast(t){var e=this;return(0,f.Z)(function*(){yield(yield e.toastController.create({message:t,duration:2e3,position:"bottom",color:"success",buttons:[{side:"end",icon:"close-outline",role:"cancel",handler:()=>{console.log("Cerrar toast")}}]})).present()})()}pulsarFuera(t){this.nuevoProducto=!1}registrarNuevoProducto(){this.firebase.nuevoProducto(this.formReg.value.nombre,this.formReg.value.precio,!1).then(()=>{this.nuevoProducto=!1,this.productos=[],this.productosModificar=[],this.formReg.controls.nombre.setValue(""),this.formReg.controls.precio.setValue(""),this.allProducts()}).catch(()=>{this.nuevoProducto=!1,this.productos=[],this.productosModificar=[],this.formReg.controls.nombre.setValue(""),this.formReg.controls.precio.setValue(""),this.allProducts()})}verificarCambios(t,e){const s=document.getElementById("nombreInput_"+e).value,c=parseFloat(document.getElementById("precioInput_"+e).value);console.log(s,c),parseFloat(t.detail.value),this.productosModificar[e].comprado=!(c>0&&c!==this.productos[e].precio||s.length>0&&s!==this.productos[e].nombre)}doRefresh(t){this.nuevoProducto=!1,this.productosModificar=[],this.productos=[],this.formReg.controls.nombre.setValue(""),this.formReg.controls.precio.setValue(""),this.allProducts(),setTimeout(()=>{console.log("Recarga completada"),t.target.complete()},2e3)}confirmarCambios(t,e){const s=document.getElementById("nombreInput_"+e).value,c=parseFloat(document.getElementById("precioInput_"+e).value);this.firebase.actualizarProducto(t.nombre,s,c).then(()=>{this.mostrarToast("Se ha actualizado el producto "+s+" con "+c+"\u20ac"),this.productosModificar[e].comprado=!0,this.productos[e].precio=c}).catch(()=>{this.nuevoProducto=!1,this.productos=[],this.productosModificar=[],this.formReg.controls.nombre.setValue(""),this.formReg.controls.precio.setValue(""),this.allProducts()})}setResult(t,e){"confirm"===t.detail.role&&this.borrarProducto(e),console.log(`Dismissed with role: ${t.detail.role}`)}borrarProducto(t){this.firebase.borrarProducto(t.nombre).then(()=>{this.productos=[],this.productosModificar=[],this.allProducts(),this.mostrarToast("Se ha elimiado el producto "+t.nombre)}).catch(()=>{this.nuevoProducto=!1,this.productos=[],this.productosModificar=[],this.formReg.controls.nombre.setValue(""),this.formReg.controls.precio.setValue(""),this.allProducts()})}}return(n=l).\u0275fac=function(t){return new(t||n)(o.Y36(h.O),o.Y36(r.yF),o.Y36(a.qu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-configuraciones"]],decls:16,vars:4,consts:[[3,"translucent"],[1,"ion-text-uppercase"],["slot","start"],["color","secondary"],[1,"center-title"],[1,"ion-padding",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["slot","fixed","vertical","bottom","horizontal","end"],[3,"click"],["name","add-sharp"],[4,"ngFor","ngForOf"],["id","example-modal",3,"isOpen","ionModalDidDismiss"],["modal",""],["color","medium"],["aria-label","nombre","type","text","fill","outline","color","warning",3,"value","id","ionInput"],["type","number","color","warning","label","","fill","outline",3,"value","id","ionInput"],["size","small","color","success",2,"margin-right","5px",3,"disabled","click"],["name","save"],["size","small","color","danger",3,"id"],["name","trash"],[1,"custom-alert",3,"trigger","header","buttons","didDismiss"],[1,"wrapper"],[3,"formGroup"],["lines","none"],["label","Nombre","formControlName","nombre"],["label","Precio","type","number","formControlName","precio"],[1,"ion-align-items-center"],["fill","clear","color","success",2,"margin-left","100px",3,"disabled","click"],["name","checkmark"]],template:function(t,e){1&t&&(o.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),o._UZ(3,"ion-menu-button",3),o.qZA(),o.TgZ(4,"ion-title",4),o._uU(5,"Configuraciones"),o.qZA()()(),o.TgZ(6,"ion-content",5)(7,"ion-refresher",6),o.NdJ("ionRefresh",function(c){return e.doRefresh(c)}),o._UZ(8,"ion-refresher-content"),o.qZA(),o.TgZ(9,"ion-fab",7)(10,"ion-fab-button",8),o.NdJ("click",function(){return e.setProducto(!0)}),o._UZ(11,"ion-icon",9),o.qZA()(),o.YNc(12,b,9,9,"ion-list",10),o.TgZ(13,"ion-modal",11,12),o.NdJ("ionModalDidDismiss",function(c){return e.pulsarFuera(c)}),o.YNc(15,_,12,2,"ng-template"),o.qZA()()),2&t&&(o.Q6J("translucent",!0),o.xp6(6),o.Q6J("fullscreen",!0),o.xp6(6),o.Q6J("ngForOf",e.productosModificar),o.xp6(1),o.Q6J("isOpen",e.nuevoProducto))},dependencies:[m.sg,a._Y,a.JJ,a.JL,r.Ge,r.YG,r.Sm,r.W2,r.IJ,r.W4,r.Gu,r.gu,r.pK,r.Ie,r.q_,r.fG,r.nJ,r.Wo,r.wd,r.sr,r.ki,r.as,r.j9,a.sg,a.u],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color: #1e1e1e}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color: #1e1e1e}.center-title[_ngcontent-%COMP%]{text-align:center;width:100%;color:#f0f0f0;font-family:Roboto,sans-serif;font-weight:700;font-size:25px}ion-item[_ngcontent-%COMP%]{border-radius:15px}ion-modal#example-modal[_ngcontent-%COMP%]{--width: fit-content;--min-width: 250px;--height: fit-content;--border-radius: 6px;--box-shadow: 0 28px 48px rgba(0, 0, 0, .4)}ion-modal#example-modal[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:20px 20px 10px}ion-modal#example-modal[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:6px;width:48px;height:48px;padding:4px 0;color:#aaa}ion-modal#example-modal[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{margin-bottom:10px}.block[_ngcontent-%COMP%]{width:100%;height:300px;background-color:#1e1e1e;padding:5px}ion-modal[_ngcontent-%COMP%]{--height: auto}ion-fab-button[_ngcontent-%COMP%]{--background: #b7f399;--background-activated: #87d361;--background-hover: #a3e681;--border-radius: 15px;--box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, .3), 0px 1px 3px 1px rgba(0, 0, 0, .15);--color: black}ion-input[_ngcontent-%COMP%]{text-align:center}ion-alert.custom-alert[_ngcontent-%COMP%]{--backdrop-opacity: .7}.custom-alert[_ngcontent-%COMP%]   .alert-button-group[_ngcontent-%COMP%]{padding:8px}button.alert-button.alert-button-confirm[_ngcontent-%COMP%]{background-color:var(--ion-color-success);color:var(--ion-color-success-contrast)}.md[_ngcontent-%COMP%]   button.alert-button.alert-button-confirm[_ngcontent-%COMP%]{border-radius:4px}.ios[_ngcontent-%COMP%]   .custom-alert[_ngcontent-%COMP%]   button.alert-button[_ngcontent-%COMP%]{border:.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0),.2)}.ios[_ngcontent-%COMP%]   button.alert-button.alert-button-cancel[_ngcontent-%COMP%]{border-right:0;border-bottom-left-radius:13px;border-top-left-radius:13px}.ios[_ngcontent-%COMP%]   button.alert-button.alert-button-confirm[_ngcontent-%COMP%]{border-bottom-right-radius:13px;border-top-right-radius:13px}"]}),l})()}];let C=(()=>{var n;class l{}return(n=l).\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[g.Bz.forChild(P),g.Bz]}),l})(),x=(()=>{var n;class l{}return(n=l).\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[m.ez,a.u5,r.Pc,C,a.u5,a.UX]}),l})()}}]);